<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dosya Paylaşım Platformu</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .drag-over {
            border-color: #3b82f6; /* blue-500 */
            background-color: #1f2937; /* gray-800 */
        }
        .toast {
            transition: opacity 0.3s ease-in-out, transform 0.3s ease-in-out;
        }
    </style>
</head>
<body class="bg-gray-900 text-slate-200">

    <!-- Ana Konteyner -->
    <div class="flex flex-col items-center justify-center min-h-screen p-4 sm:p-6 lg:p-8">
        <div class="w-full max-w-4xl mx-auto">
            
            <!-- Başlık Alanı -->
            <header class="text-center mb-8">
                <h1 class="text-4xl sm:text-5xl font-bold text-white mb-2">Dosya Yükle ve Paylaş</h1>
                <p class="text-lg text-slate-400">Dosyalarınızı kolayca yükleyin ve anında paylaşım linki oluşturun.</p>
            </header>

            <!-- Dosya Yükleme Alanı -->
            <div class="bg-gray-800 border-2 border-dashed border-gray-600 rounded-xl p-8 sm:p-12 text-center transition-all duration-300" id="drop-zone">
                <input type="file" id="file-input" multiple class="hidden">
                
                <!-- SVG İkonu -->
                <div class="flex justify-center mb-4">
                    <svg class="w-16 h-16 text-gray-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 16.5V9.75m0 0l-3 3m3-3l3 3M6.75 19.5a4.5 4.5 0 01-1.41-8.775 5.25 5.25 0 0110.233-2.33 3 3 0 013.758 3.848A3.752 3.752 0 0118 19.5H6.75z" />
                    </svg>
                </div>
                
                <p class="text-xl font-semibold text-white">Dosyanızı buraya sürükleyin</p>
                <p class="text-slate-400 mt-1">veya</p>
                <button id="browse-btn" class="mt-4 bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-6 rounded-lg transition-colors duration-300">
                    Dosya Seç
                </button>
            </div>

            <!-- Yüklenen Dosyalar Listesi -->
            <div id="file-list-container" class="mt-8">
                <!-- Dinamik olarak doldurulacak -->
            </div>
        </div>
    </div>

    <!-- Kopyalama Bildirimi (Toast) -->
    <div id="toast" class="toast fixed bottom-5 right-5 bg-green-600 text-white py-3 px-6 rounded-lg shadow-lg opacity-0 transform translate-y-10">
        Link panoya kopyalandı!
    </div>


    <script>
        const dropZone = document.getElementById('drop-zone');
        const fileInput = document.getElementById('file-input');
        const browseBtn = document.getElementById('browse-btn');
        const fileListContainer = document.getElementById('file-list-container');
        const toast = document.getElementById('toast');

        // Dosya seçme butonuna tıklanınca gizli input'u tetikle
        browseBtn.addEventListener('click', () => fileInput.click());
        
        // Dosya seçildiğinde
        fileInput.addEventListener('change', (e) => {
            handleFiles(e.target.files);
        });

        // Sürükle-Bırak Olayları
        dropZone.addEventListener('dragover', (e) => {
            e.preventDefault();
            dropZone.classList.add('drag-over');
        });

        dropZone.addEventListener('dragleave', (e) => {
            e.preventDefault();
            dropZone.classList.remove('drag-over');
        });

        dropZone.addEventListener('drop', (e) => {
            e.preventDefault();
            dropZone.classList.remove('drag-over');
            const files = e.dataTransfer.files;
            if (files.length) {
                handleFiles(files);
            }
        });
        
        // Tıklama ile de dosya yükleme alanı tetiklenebilir
        dropZone.addEventListener('click', (e) => {
             if (e.target.id === 'drop-zone' || e.target.parentElement.id === 'drop-zone' || e.target.tagName === 'P') {
                fileInput.click();
            }
        });


        // Dosyaları işleyen ana fonksiyon
        function handleFiles(files) {
            if (files.length === 0) return;

            // Eğer "Henüz dosya yüklenmedi" mesajı varsa kaldır
            const existingPlaceholder = document.getElementById('placeholder');
            if(existingPlaceholder) {
                existingPlaceholder.remove();
            } else if (fileListContainer.children.length === 0) {
                 // Başlık ekle
                const header = document.createElement('h2');
                header.className = 'text-2xl font-bold text-white mb-4';
                header.textContent = 'Paylaşım Linkleri';
                fileListContainer.appendChild(header);
            }

            // Her bir dosya için kart oluştur
            [...files].forEach(file => {
                const fileURL = URL.createObjectURL(file);
                createFileCard(file, fileURL);
            });
        }
        
        // Dosya boyutunu formatlayan yardımcı fonksiyon
        function formatFileSize(bytes) {
            if (bytes === 0) return '0 Bytes';
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
        }

        // Dosya için arayüz kartı oluşturan fonksiyon
        function createFileCard(file, url) {
            const fileSize = formatFileSize(file.size);
            const cardHTML = `
                <div class="bg-gray-800 rounded-lg p-4 flex flex-col sm:flex-row items-center gap-4 mb-4 animate-fade-in">
                    <!-- Dosya ikonu -->
                    <div class="flex-shrink-0">
                        <svg class="w-10 h-10 text-slate-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                           <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z" />
                        </svg>
                    </div>
                    <!-- Dosya Bilgileri -->
                    <div class="flex-grow text-center sm:text-left">
                        <p class="font-semibold text-white truncate">${file.name}</p>
                        <p class="text-sm text-slate-400">${fileSize}</p>
                    </div>
                     <!-- Link Alanı -->
                    <div class="w-full sm:w-auto flex flex-col sm:flex-row items-center gap-2 mt-4 sm:mt-0">
                         <input type="text" value="${url}" readonly class="w-full bg-gray-700 text-slate-300 border border-gray-600 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:outline-none select-all">
                        <div class="flex gap-2 w-full sm:w-auto">
                            <button class="copy-btn w-1/2 sm:w-auto bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-md transition-colors duration-300 flex items-center justify-center gap-2">
                                <svg class="w-4 h-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M8.25 7.5V6.108c0-1.135.845-2.098 1.976-2.192.353-.026.692-.04 1.024-.04h.022c.332 0 .671.014 1.024.04.834.06 1.631.343 2.226.835l.937 1.01-3.75 3.75-2.226-2.225.937-1.01c-.13-.14-.28-.266-.442-.372z" /><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 9.375l-3.75 3.75-2.226-2.226.937-1.01c.13-.14.28-.266.442-.372.29.123.595.218.92.283.326.066.66.1.996.1h.022c.336 0 .67-.034.996-.1.325-.065.63-.16.92-.283.162.106.312.232.442.372z" /></svg>
                                Kopyala
                            </button>
                            <a href="${url}" download="${file.name}" class="download-btn w-1/2 sm:w-auto bg-green-600 hover:bg-green-700 text-white font-medium py-2 px-4 rounded-md transition-colors duration-300 flex items-center justify-center gap-2">
                                <svg class="w-4 h-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3" /></svg>
                                İndir
                            </a>
                        </div>
                    </div>
                </div>
            `;
            fileListContainer.insertAdjacentHTML('beforeend', cardHTML);
        }

        // Kopyala butonlarına olay dinleyici ekle (event delegation ile)
        document.body.addEventListener('click', (e) => {
            const copyBtn = e.target.closest('.copy-btn');
            if (copyBtn) {
                const urlInput = copyBtn.closest('.flex-col').querySelector('input[type="text"]');
                copyToClipboard(urlInput.value);
            }
        });
        
        // Panoya kopyalama fonksiyonu
        function copyToClipboard(text) {
             const tempInput = document.createElement('textarea');
             tempInput.value = text;
             document.body.appendChild(tempInput);
             tempInput.select();
             document.execCommand('copy');
             document.body.removeChild(tempInput);
             showToast();
        }

        // Kopyalama bildirimini göster
        function showToast() {
            toast.classList.remove('opacity-0', 'translate-y-10');
            toast.classList.add('opacity-100', 'transform-none');

            setTimeout(() => {
                toast.classList.remove('opacity-100', 'transform-none');
                toast.classList.add('opacity-0', 'translate-y-10');
            }, 3000);
        }

    </script>
</body>
</html>
